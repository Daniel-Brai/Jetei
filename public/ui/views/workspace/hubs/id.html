{% extends "views/layouts/base.html" %}

{% block js %}
<script nonce="{{ nonce }}" src="/assets/js/json-enc.js"></script>
<script nonce="{{ nonce }}" src="/assets/js/client-side-templates.js"></script>
<script nonce="{{ nonce }}" src="/assets/js/nunjucks.min.js"></script>
{% endblock %}

{% block content %}
<section class="container mt-12 grid-cols-1 sm:grid-cols-2" hx-ext="preload">
    <div class="flex w-full flex-col space-y-6 sm:w-[600px]">
        <div class="flex flex-col space-y-2 text-left">
        <div class="text-2xl md:text-[32px] font-semibold tracking-tight flex items-center w-full">
            Your Hub - {{ hub.name }}
        </div>
        <p class="text-[15px] text-muted-foreground max-w-[600px]">
            {{ hub.description }}
        </p>
    </div>

    <div class="mt-56">
        <div class="flex flex-col space-y-3">
            <div class="flex items-center justify-between">
                <p class="text-2xl font-semibold md:text-[32px] tracking-tight">Your Recent notes</p>
                 <div
                    class="bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"
                    >
                    <a href="{{ url }}/notes/new">
                        <div
                        class="relative btn-outline rounded-md flex items-center px-3 py-2 space-x-2 cursor-pointer"
                        >
                        <div class="text-muted-foreground">
                            <svg
                            class="size-5"
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="lucide lucide-plus-circle"
                            >
                            <circle cx="12" cy="12" r="10" />
                            <path d="M8 12h8" />
                            <path d="M12 8v8" />
                            </svg>
                        </div>
                        <p class="text-sm">Create Note</p>
                        </div>
                    </a>
                </div>
            </div>
            <div class="space-y-8">
                {% if arrayLengthInString(hub.notes) == '0' %}
                    <p>No notes found!</p>
                {% else %}
                    {% for note in hub.notes %}
                        <a class="cursor-pointer" href="{{ url }}/notes/{{ note.id }}" preload="mouseover">
                            <div class="flex items-center btn-ghost py-3 px-3 rounded-md">
                                <div class="mr-3">
                                    <svg class="size-7" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 6h4"/><path d="M2 10h4"/><path d="M2 14h4"/><path d="M2 18h4"/><rect width="16" height="20" x="4" y="2" rx="2"/><path d="M16 2v20"/></svg>
                                </div>
                                <div class="space-y-1">
                                <p class="text-sm font-medium leading-none">
                                    {% if note.name %}
                                    {{ note.name }}
                                    {% else %}
                                    No name yet!
                                    {% endif %}
                                </p>
                                <p class="text-sm text-muted-foreground">
                                    {% if note.text %}
                                    {{ note.text }}
                                    {% elif note.markdown %}
                                    {{ subString(mdToText(md), 300) }}
                                    {% else %}
                                    No content yet!
                                    {% endif %}
                                </p>
                                </div>
                                <div class="ml-auto text-sm font-medium">Edited {{ formatDistanceToNow(note.updatedAt) }}</div>
                            </div>
                        </a>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block footer %}
    {% include "partials/_footer_alt.html" %}
{% endblock %}