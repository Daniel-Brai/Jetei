{% extends "views/layouts/base.html" %} 

{% block js %}
<script nonce="{{ nonce }}" src="/assets/js/json-enc.js"></script>
{% endblock %} 

{% block content %}
<section class="container mt-8 py-20">
  <div class="mx-auto flex w-full flex-col justify-center space-y-6 sm:w-96">
    <div class="flex flex-col space-y-2 text-center">
      <h1 class="text-2xl font-semibold tracking-tight">Verify your account</h1>
      <p class="text-sm text-muted-foreground">
        Your knowledge hub awaits! Connect and share knowledge seamlessly.
      </p>
    </div>

    <form id="{{ form_id }}" class="my-6 flex flex-col space-y-4 px-0" data-hx-post="{{ api_url }}" data-hx-ext="json-enc" data-hx-trigger="submit">
      {% from "macros/form.html" import input_required, button %}
      {{ button(id="verify_account_btn", class="btn-base-variant btn-base-size text-sm rounded-md flex items-center justify-center invisible", text="Verify account") }}
    </form>
  </div>
</section>
<script nonce="{{ nonce }}">
    /**
     * @type {HTMLButtonElement}
     */
    let verify_account_btn;

    verify_account_btn = document.querySelector('verify_account_btn')

    if(!verify_account_btn) {
        console.error('Button for account verification not found')
        throw new Error()
    }

    if (verify_account_btn) {
        setTimeout(() => {
            verify_account_btn.click()
        }, 800)
    }
</script>
{% include 'partials/_form_handler.html' %}
{% endblock %}